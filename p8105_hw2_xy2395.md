p8105\_hw2\_xy2395
================
Jack Yan
9/27/2018

Problem 1
=========

Data import and manipulation
----------------------------

``` r
data_nysubway = 
  read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(-division, -exit_only, -(staffing:staff_hours), -(ada_notes:entrance_location)) %>% 
  mutate( entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

The code above imported data from the `.csv` file, and cleaned up variable names using `clean_names` function. It also selected variables to be used from the original dataset. Further, it converted the entry variable from character (`YES` vs `NO`) to a logical variable. Now the dataset contains variables of line, station name, station latitude & longitude, routes served, entrance type, entry, vending, and ADA compliance. Now the dataset has 1868 rows (observations) and 19 columns (variables). The data are not yet tidy, because the routes that each station supports are spead along variables from route1 to route11. I will fix this problem in Question 4.

A datailed list of variables in this dataset is shown below:

``` r
names(data_nysubway)
```

    ##  [1] "line"              "station_name"      "station_latitude" 
    ##  [4] "station_longitude" "route1"            "route2"           
    ##  [7] "route3"            "route4"            "route5"           
    ## [10] "route6"            "route7"            "route8"           
    ## [13] "route9"            "route10"           "route11"          
    ## [16] "entrance_type"     "entry"             "vending"          
    ## [19] "ada"

Questions
---------

### Question 1

``` r
data_nysubway = mutate(data_nysubway, station_name_line = paste(station_name, line) )
distinct_line_station_name = distinct(data_nysubway, line_station_name)
```

    ## Warning: Trying to compute distinct() for variables not found in the data:
    ## - `line_station_name`
    ## This is an error, but only a warning is raised for compatibility reasons.
    ## The operation will return the input unchanged.

``` r
nrow(distinct_line_station_name)
```

    ## [1] 1868

There are 1868 stations.

### Question 2

``` r
data_nysubway %>% 
  filter(ada == TRUE) %>% 
  distinct(station_name_line) %>% 
  nrow()
```

    ## [1] 84

There are 84 ADA compliant stations.

### Question 3

``` r
n_without_vending =
  data_nysubway %>% 
  filter( vending == "NO") %>% 
  nrow()

n_without_vending_allow_entrance = 
  data_nysubway %>% 
  filter( vending == "NO") %>% 
  filter( entry == TRUE) %>% 
  nrow()

n_without_vending_allow_entrance / n_without_vending
```

    ## [1] 0.3770492

The proportion of station entrances / exits without vending allow entrance is 0.38.

### Question 4

``` r
tidy_data_nysubway = 
  gather(data_nysubway, key = route_number, value = route_served, route1:route11) %>% 
  filter(route_served != 'NA') %>% 
  select(-route_number)

tidy_data_nysubway %>% 
  filter(route_served == "A") %>% 
  distinct(station_name_line) %>% 
  nrow()
```

    ## [1] 60

``` r
tidy_data_nysubway %>% 
  filter(route_served == "A") %>% 
  filter(ada == TRUE) %>% 
  distinct(station_name_line) %>% 
  nrow()
```

    ## [1] 17

There are 60 distinct stations serving the A train, and 17 of them are ADA compliant.

Problem 2
=========
